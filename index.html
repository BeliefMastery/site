<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <base href="https://beliefmastery.github.io/site/">
  <title>Sovereign of Mind — Online Sovereignty Tools & Cognitive Defense</title>
  <meta name="description" content="Sovereignty tools and cognitive defense frameworks. Assess your cognitive resistance capacity, identify manipulation vectors, discover your modern archetypes, and build sovereignty through diagnostic clarity. For those who sense the silent structural war for human agency.">

  <!-- Open Graph / Twitter Cards for social previews -->
  <meta property="og:title" content="Sovereign of Mind — Online Sovereignty Tools & Cognitive Defense">
  <meta property="og:description" content="Comprehensive sovereignty tools: cognitive resistance capacity assessment, manipulation vector identification, modern archetype identification, channel flow diagnostics, logos structure, pathology assessment, and cognitive defense frameworks. Stand guard over the mind itself.">
  <meta property="og:image" content="https://beliefmastery.github.io/site/images/SoM-cover.jpg">
  <meta property="og:url" content="https://beliefmastery.github.io/site/">
  <meta property="og:type" content="website">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:title" content="Sovereign of Mind — Online Sovereignty Tools & Cognitive Defense">
  <meta name="twitter:description" content="Comprehensive sovereignty tools: cognitive resistance capacity assessment, manipulation vector identification, modern archetype identification, channel flow diagnostics, logos structure, pathology assessment, and cognitive defense frameworks. Stand guard over the mind itself.">
  <meta name="twitter:image" content="https://beliefmastery.github.io/site/images/SoM-cover.jpg">

  <!-- Performance: Resource hints -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="dns-prefetch" href="https://fonts.googleapis.com">
  
  <!-- Preload critical images -->
  <link rel="preload" href="./images/SoM-cover.jpg" as="image" type="image/jpeg">
  <link rel="preload" href="./images/BM-cover.jpg" as="image" type="image/jpeg">

  <!-- Font used in original -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
  
  <!-- Shared stylesheet -->
  <link rel="stylesheet" href="style.css">
  
  <!-- Content Security Policy (CSP) -->
  <!-- Note: frame-ancestors must be set via HTTP headers, not meta tags -->
  <meta http-equiv="Content-Security-Policy" content="default-src 'self'; script-src 'self' 'unsafe-inline' https://fonts.googleapis.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self';">

  <!-- Structured Data: JSON-LD for Books (SEO enhancement for discoverability) -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "CollectionPage",
    "name": "Sovereign of Mind — Online Sovereignty Tools & Cognitive Defense",
    "description": "Comprehensive sovereignty tools and cognitive defense frameworks. Assess AI dependency, identify manipulation vectors, analyze archetypes, and build sovereignty through diagnostic clarity. For those who sense the silent structural war for human agency.",
    "author": {
      "@type": "Person",
      "name": "Warwick Marshall"
    },
    "mainEntity": [
      {
        "@type": "Book",
        "name": "Sovereign of Mind",
        "description": "Cognitive defense addressing manipulation, ideological capture, and psychological warfare in contemporary culture. Flagship work for those who sense an active contest for the human mind and seek to fortify the inner terrain where meaning and agency are decided.",
        "author": {
          "@type": "Person",
          "name": "Warwick Marshall"
        },
        "url": "https://www.amazon.com/Sovereign-Mind-Cognitive-Manipulation-Authorship-ebook/dp/B0F9VJK911",
        "image": "https://beliefmastery.github.io/site/images/SoM-cover.jpg",
        "genre": "Philosophy",
        "datePublished": "2024"
      },
      {
        "@type": "Book",
        "name": "Belief Mastery",
        "description": "A structural method for those who sense something essential is under pressure: agency, clarity, integrity of perception. Reveals how subconscious belief structures form under pressure, how they are exploited, and how they can be consciously dismantled and fortified.",
        "author": {
          "@type": "Person",
          "name": "Warwick Marshall"
        },
        "url": "https://www.amazon.com/Belief-Mastery-Identifying-Transforming-Subconscious-ebook/dp/B0FG1B174P",
        "image": "https://beliefmastery.github.io/site/images/BM-cover.jpg",
        "genre": "Self-Help",
        "datePublished": "2024"
      },
      {
        "@type": "Book",
        "name": "The Sovereignty-Distortion Codex",
        "description": "Structural mapping of distortions that erode will and coherence. Diagnostic framework for identifying cognitive hijacking patterns and restoring authorship through structural precision.",
        "author": {
          "@type": "Person",
          "name": "Warwick Marshall"
        },
        "url": "https://www.amazon.com/Structural-Demonology-Taxonomy-Sovereignty-Distortion-Codex/dp/B0FHG1M794",
        "image": "https://beliefmastery.github.io/site/images/SDC-cover.jpg",
        "genre": "Psychology",
        "datePublished": "2024"
      }
    ]
  }
  </script>

  <!-- Universal background styles -->
  <link rel="stylesheet" href="./shared/background.css">
</head>
<body>
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Nebula-style cosmic background -->
  <div class="bg-gradient"></div>
  <canvas id="nebula-canvas" aria-hidden="true"></canvas>
  <div class="bg-overlay"></div>

    <header class="site-header" role="banner">
    <nav class="nav" aria-label="Primary navigation">
      <button class="hamburger" aria-expanded="false" aria-controls="top-nav" aria-label="Toggle navigation">☰</button>
      <ul class="nav-list" id="top-nav" role="menubar">
        <li role="none"><a role="menuitem" href="index.html" class="active">Home</a></li>
        <li role="none" class="nav-dropdown">
          <a role="menuitem" href="books.html" class="dropdown-toggle">Books <span style="font-size:0.8em;">▼</span></a>
          <ul class="dropdown-menu" role="menu">
            <li role="none"><a role="menuitem" href="books.html">All Books</a></li>
            <li role="none"><a role="menuitem" href="books.html#belief-mastery">Belief Mastery</a></li>
            <li role="none"><a role="menuitem" href="books.html#sovereign-of-mind">Sovereign of Mind</a></li>
            <li role="none"><a role="menuitem" href="books.html#distortion-codex">Distortion Codex</a></li>
            <li role="none"><a role="menuitem" href="books.html#unspeakables-grimoire">The Unspeakables Grimoire</a></li>
            <li role="none"><a role="menuitem" href="books.html#sovereign-integral-devotionalism">Sovereign Integral Devotionalism</a></li>
            <li role="none"><a role="menuitem" href="books.html#peer-counseling-manual">Peer-Counseling Manual</a></li>
          </ul>
        </li>
        <li role="none" class="nav-dropdown">
          <a role="menuitem" href="tools.html" class="dropdown-toggle">Tools <span style="font-size:0.8em;">▼</span></a>
          <ul class="dropdown-menu" role="menu">
            <li role="none"><a role="menuitem" href="tools.html">All Tools</a></li>
            <li role="separator" style="border-top:1px solid rgba(255,255,255,0.2);margin:0.5rem 0;"><span style="padding:0.5rem 1rem;font-size:0.85rem;color:var(--muted);font-weight:600;">Psychological</span></li>
            <li role="none"><a role="menuitem" href="diagnosis.html">Pathology Assessment</a></li>
            <li role="none"><a role="menuitem" href="coaching.html">Life Domain Review</a></li>
            <li role="none"><a role="menuitem" href="needs-dependency.html">Dependency Loop Tracer</a></li>
            <li role="separator" style="border-top:1px solid rgba(255,255,255,0.2);margin:0.5rem 0;"><span style="padding:0.5rem 1rem;font-size:0.85rem;color:var(--muted);font-weight:600;">Defensive/Protective</span></li>
            <li role="none"><a role="menuitem" href="manipulation.html">Manipulation Defense Decoder</a></li>
            <li role="separator" style="border-top:1px solid rgba(255,255,255,0.2);margin:0.5rem 0;"><span style="padding:0.5rem 1rem;font-size:0.85rem;color:var(--muted);font-weight:600;">Philosophical</span></li>
            <li role="none"><a role="menuitem" href="sovereignty-spectrum.html">Technical Title for your Sovereignty Paradigm</a></li>
            <li role="none"><a role="menuitem" href="paradigm.html">Logos Structure</a></li>
            <li role="separator" style="border-top:1px solid rgba(255,255,255,0.2);margin:0.5rem 0;"><span style="padding:0.5rem 1rem;font-size:0.85rem;color:var(--muted);font-weight:600;">Relational</span></li>
            <li role="none"><a role="menuitem" href="relationship.html">Relationship Bottleneck Analysis</a></li>
            <li role="none"><a role="menuitem" href="temperament.html">Polarity Position Mapping</a></li>
            <li role="none"><a role="menuitem" href="archetype.html">Modern Archetype Identification</a></li>
            <li role="separator" style="border-top:1px solid rgba(255,255,255,0.2);margin:0.5rem 0;"><span style="padding:0.5rem 1rem;font-size:0.85rem;color:var(--muted);font-weight:600;">Esoteric</span></li>
            <li role="none"><a role="menuitem" href="channels.html">Channel Flow Diagnostics</a></li>
            <li role="none"><a role="menuitem" href="character-sheet.html">Astrological Character Sheet</a></li>
            <li role="separator" style="border-top:1px solid rgba(255,255,255,0.2);margin:0.5rem 0;"><span style="padding:0.5rem 1rem;font-size:0.85rem;color:var(--muted);font-weight:600;">Technological/AI</span></li>
            <li role="none"><a role="menuitem" href="https://chatgpt.com/g/g-684212ba47e081918d000ec3f9cf8f69-simulacrum-exorcist-edition" target="_blank">Unlocked GPT</a></li>
            <li role="none"><a role="menuitem" href="sovereignty.html">Cognitive Resistance Capacity Assessment</a></li>
          </ul>
        </li>
        <li role="none"><a role="menuitem" href="about-the-author.html">About the Author</a></li>
      </ul>
    </nav>
  </header>

  <main class="container" id="main-content" role="main">

    <!-- Plain Language Orientation Block -->
    <section class="orientation-block" style="background: var(--glass); padding: 2rem; border-radius: var(--radius); margin: 2rem 0; box-shadow: var(--shadow);">
      <h1 style="margin-top: 0; color: var(--brand);">What This Site Is</h1>
      <p><strong>This site documents:</strong> Books and diagnostic tools for mental sovereignty and cognitive defense.</p>
      
      <p><strong>Primary audience:</strong> Individuals interested in mental sovereignty, self-assessment tools, and cognitive defense frameworks.</p>
      
      <p><strong>Use this site if:</strong> You want to learn about books on mental sovereignty, explore self-assessment tools for psychological patterns, relationships, archetypes, or worldview clarity, or contact the author.</p>
      
      <p><strong>How to navigate:</strong> Use the menu above to access Books, Tools, or About the Author. The Tools section contains 13 diagnostic self-assessment tools organized by category.</p>
      
      <p style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid rgba(0,0,0,0.1);"><strong>New to the site?</strong> <a href="tools.html" style="color: var(--accent); font-weight: 600;">Start with the Tools</a> to explore self-assessment tools, or <a href="books.html" style="color: var(--accent); font-weight: 600;">browse the Books</a> to learn about the frameworks.</p>
    </section>

    <!-- Online Sovereignty Tools and Analysis Section -->
    <section id="tools" aria-labelledby="tools-title">
      <div class="section-inner minimal-section">
        <a href="tools.html" class="section-title-btn" id="tools-title">Online Sovereignty Tools and Analysis</a>
        <div class="image-row tools-grid" aria-hidden="false" role="presentation" style="margin-top:1rem;">
          <!-- Psychological -->
          <figure class="image-card tool-card" data-title="Pathology Assessment" data-summary="Map psychological patterns to DSM-5 categories. Educational self-reporting tool for pattern awareness, not clinical diagnosis.">
            <a href="diagnosis.html"><img src="./images/DSM5-cover.jpg" alt="Pathology Assessment" loading="lazy"></a>
            <div class="tool-summary">Map psychological patterns to DSM-5 categories. Educational self-reporting tool for pattern awareness, not clinical diagnosis.</div>
          </figure>
          <figure class="image-card tool-card" data-title="Life Domain Review" data-summary="Map 15 Obstacles to Sovereignty and 10 Satisfaction Domains. Identifies highest-impact areas for focused work.">
            <a href="coaching.html"><img src="./images/coaching-agent-cover.jpg" alt="Life Domain Review" loading="lazy"></a>
            <div class="tool-summary">Map 15 Obstacles to Sovereignty and 10 Satisfaction Domains. Identifies highest-impact areas for focused work.</div>
          </figure>
          <figure class="image-card tool-card" data-title="Needs Dependency Loop" data-summary="Clarifying patterns through the lens of needs so they can be functionally addressed.">
            <a href="needs-dependency.html"><img src="./images/dependency-loop-cover.jpg" alt="Needs Dependency Loop Determinator" loading="lazy"></a>
            <div class="tool-summary">Clarifying patterns through the lens of needs so they can be functionally addressed.</div>
          </figure>
          <!-- Defensive/Protective -->
          <figure class="image-card tool-card" data-title="Manipulation Analysis" data-summary="Precise reflections on the manipulation strategies being employed against you, as well as providing countermeasures.">
            <a href="manipulation.html"><img src="./images/manipulation-analysis-cover.jpg" alt="Manipulation Analysis" loading="lazy"></a>
            <div class="tool-summary">Precise reflections on the manipulation strategies being employed against you, as well as providing countermeasures.</div>
          </figure>
          <!-- Philosophical -->
          <figure class="image-card tool-card" data-title="Technical Title for your Sovereignty Paradigm" data-summary="Map your alignment across 25 philosophical, spiritual, and psychological paradigms. Discover the technical title for your sovereignty paradigm.">
            <a href="sovereignty-spectrum.html"><img src="./images/sovereignty-spectrum-cover.jpg" alt="Technical Title for your Sovereignty Paradigm" loading="lazy"></a>
            <div class="tool-summary">Map your alignment across 25 philosophical, spiritual, and psychological paradigms. Discover the technical title for your sovereignty paradigm.</div>
          </figure>
          <figure class="image-card tool-card" data-title="Logos Structure" data-summary="Map your worldview foundation across four dimensions of truth. Clarify your paradigm of 'The Good Life' and 'God'.">
            <a href="paradigm.html"><img src="./images/paradigm-clarification-cover.jpg" alt="Logos Structure" loading="lazy"></a>
            <div class="tool-summary">Map your worldview foundation across four dimensions of truth. Clarify your paradigm of 'The Good Life' and 'God'.</div>
          </figure>
          <!-- Relational -->
          <figure class="image-card tool-card" data-title="Relationship Optimization" data-summary="Identifies contention and outlines optimal strategies for resolution.">
            <a href="relationship.html"><img src="./images/relationship-optimization-cover.jpg" alt="Relationship Optimization" loading="lazy"></a>
            <div class="tool-summary">Identifies contention and outlines optimal strategies for resolution.</div>
          </figure>
          <figure class="image-card tool-card" data-title="Temperament Analyzer" data-summary="Clarifies masculine-feminine temperament across the range of human expression.">
            <a href="temperament.html"><img src="./images/temperament-analysis-cover.jpg" alt="Temperament Analyzer" loading="lazy"></a>
            <div class="tool-summary">Clarifies masculine-feminine temperament across the range of human expression.</div>
          </figure>
          <figure class="image-card tool-card" data-title="Modern Archetype Identification" data-summary="Identify your primary, secondary, and tertiary modern archetypes through a comprehensive multi-tier assessment system.">
            <a href="archetype.html"><img src="./images/redpill-cover.jpg" alt="Modern Archetype Identification" loading="lazy"></a>
            <div class="tool-summary">Identify your primary, secondary, and tertiary modern archetypes through a comprehensive multi-tier assessment system.</div>
          </figure>
          <!-- Esoteric -->
          <figure class="image-card tool-card" data-title="Channel Taxonomy" data-summary="Using the chakral nodal system and corresponding inter-nodal channels matrix to translate awareness of the full spectrum of human experience and bring attention to weak links.">
            <a href="channels.html"><img src="./images/channel-analysis-cover.jpg" alt="Channel Taxonomy Analysis" loading="lazy"></a>
            <div class="tool-summary">Using the chakral nodal system and corresponding inter-nodal channels matrix to translate awareness of the full spectrum of human experience and bring attention to weak links.</div>
          </figure>
          <figure class="image-card tool-card" data-title="Character Sheet Generator" data-summary="Astrology fusion and demystification through role-play tool.">
            <a href="character-sheet.html"><img src="./images/astrology-cover.jpg" alt="Character Sheet Generator" loading="lazy"></a>
            <div class="tool-summary">Astrology fusion and demystification through role-play tool.</div>
          </figure>
          <!-- Technological/AI -->
          <figure class="image-card tool-card" data-title="Unlocked GPT" data-summary="Custom GPT unlocked in order to tell harsh truths without sycophancy or attempts to create dependency (sovereign aligned by trying to make itself redundant through empowering the user).">
            <a href="https://chatgpt.com/g/g-684212ba47e081918d000ec3f9cf8f69-simulacrum-exorcist-edition" target="_blank"><img src="./images/simulacra.jpg" alt="Unlocked GPT AI Agent" loading="lazy"></a>
            <div class="tool-summary">Custom GPT unlocked in order to tell harsh truths without sycophancy or attempts to create dependency (sovereign aligned by trying to make itself redundant through empowering the user).</div>
          </figure>
          <figure class="image-card tool-card" data-title="Cognitive Resistance Capacity Assessment" data-summary="Measure your capacity to resist AI dependency and cognitive hijack. Identifies your position in the sovereign split.">
            <a href="sovereignty.html"><img src="./images/vulnerability-vector-cover.jpg" alt="Cognitive Resistance Capacity Assessment" loading="lazy"></a>
            <div class="tool-summary">Measure your capacity to resist AI dependency and cognitive hijack. Identifies your position in the sovereign split.</div>
          </figure>
        </div>
      </div>
    </section>

    <!-- Divider spacing to show background -->
    <div style="height:2rem;background:transparent;position:relative;z-index:0;pointer-events:none;margin:0;padding:0;"></div>

    <!-- Books Section -->
    <section id="books" aria-labelledby="books-title">
      <div class="section-inner minimal-section">
        <a href="books.html" class="section-title-btn" id="books-title">Books</a>
        <div class="image-row books-grid" aria-hidden="false" role="presentation">
          <figure class="image-card headline-book" data-title="Belief Mastery">
            <a href="books.html#belief-mastery"><img src="./images/BM-cover.jpg" alt="Belief Mastery cover" width="300" height="450"></a>
          </figure>
          <figure class="image-card headline-book" data-title="Sovereign of Mind">
            <a href="books.html#sovereign-of-mind"><img src="./images/SoM-cover.jpg" alt="Sovereign of Mind cover" width="300" height="450"></a>
          </figure>
          <figure class="image-card" data-title="Distortion Codex">
            <a href="books.html#distortion-codex"><img src="./images/SDC-cover.jpg" alt="Sovereignty-Distortion Codex cover" loading="lazy"></a>
          </figure>
          <figure class="image-card" data-title="The Unspeakables Grimoire">
            <a href="books.html#unspeakables-grimoire"><img src="./images/U-cover.jpg" alt="The Unspeakables Grimoire cover" loading="lazy"></a>
          </figure>
          <figure class="image-card" data-title="Sovereign Integral Devotionalism">
            <a href="books.html#sovereign-integral-devotionalism"><img src="./images/SID-cover.jpg" alt="Sovereign Integral Devotionalism cover" loading="lazy"></a>
          </figure>
          <figure class="image-card" data-title="Peer-Counseling Manual">
            <a href="books.html#peer-counseling-manual"><img src="./images/PC-cover.jpg" alt="The Peer-Counseling Manual cover" loading="lazy"></a>
          </figure>
        </div>
      </div>
    </section>

    <!-- Divider spacing to show background -->
    <div style="height:2rem;background:transparent;position:relative;z-index:0;pointer-events:none;margin:0;padding:0;"></div>

    <!-- Short orientation -->
    <section id="orientation">
      <div class="section-inner minimal-section">
        <div style="max-width:72ch;margin:4rem auto;color:var(--muted);line-height:1.7;">
          <h2 id="orientation-title" style="text-align:center;margin-bottom:2rem;color:var(--brand);font-size:1.8rem;">A short orientation</h2>
          <p style="font-size:1.1rem;text-align:center;margin-bottom:1.5rem;">
            These works operate as a <strong style="color:var(--brand);font-style:italic;">coherent suite</strong>. <strong style="color:var(--brand);">Belief Mastery</strong> excavates the subconscious logic that shapes choices and reorders behavior through a disciplined inference and dismantling process. <strong style="color:var(--brand);">Sovereign of Mind</strong> fortifies perception and supplies tools for resisting cognitive hijack. The <strong style="color:var(--brand);">Codex</strong> exposes recurring structural deformations so readers can recognize systemic pressure early and respond with clarity and agency.
          </p>
          <p style="font-size:1.1rem;text-align:center;">
            The site follows a simple path: <em style="color:var(--brand);font-weight:600;">discover internal drivers</em>, <em style="color:var(--brand);font-weight:600;">build durable perception</em>, and <em style="color:var(--brand);font-weight:600;">apply diagnostic recognitions</em> in daily life. Explore the <a href="books.html" style="color:var(--brand);font-weight:600;text-decoration:underline;">books</a> for depth at each stage and practical steps to move from insight to durable change. Use the <a href="tools.html" style="color:var(--brand);font-weight:600;text-decoration:underline;">tools</a>—including <strong style="color:var(--accent);">Pathology Assessment</strong>, <strong style="color:var(--accent);">Technical Title for your Sovereignty Paradigm</strong>, <strong style="color:var(--accent);">Polarity Position Mapping</strong>, <strong style="color:var(--accent);">Modern Archetype Identification</strong>, <strong style="color:var(--accent);">Relationship Bottleneck Analysis</strong>, <strong style="color:var(--accent);">Manipulation Defense Decoder</strong>, <strong style="color:var(--accent);">Channel Flow Diagnostics</strong>, <strong style="color:var(--accent);">Dependency Loop Tracer</strong>, <strong style="color:var(--accent);">Life Domain Review</strong>, <strong style="color:var(--accent);">Logos Structure</strong>, <strong style="color:var(--accent);">Cognitive Resistance Capacity Assessment</strong>, and the <strong style="color:var(--accent);">Astrological Character Sheet</strong>—to extend these frameworks into actionable systems.
          </p>
        </div>
      </div>
    </section>



  </main>

  <footer>
    <p>&copy; 2025 Belief Mastery &amp; Sovereign of Mind. All rights reserved.</p>
    <p>
      <a href="https://instagram.com/belief.mastery" target="_blank" rel="noopener">@belief.mastery</a> on Instagram | 
      <a href="https://www.facebook.com/war.mars.9" target="_blank" rel="noopener">Facebook</a>
    </p>
  </footer>

  <!-- ---------- Scripts (deferred via placement at bottom; non-blocking) ---------- -->
  <script>
    // WebGL Nebula Background (Perplexity Comet-style with golden/amber theme)
    (function() {
      const canvas = document.getElementById('nebula-canvas');
      if (!canvas) return;
      
      // Check for WebGL support and reduced motion preference
      if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
        canvas.style.display = 'none';
        return;
      }
      
      const gl = canvas.getContext('webgl') || canvas.getContext('experimental-webgl');
      if (!gl) {
        canvas.style.display = 'none'; // Gracefully degrade to CSS gradient
        return;
      }
      
      // Resize canvas
      function resize() {
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;
        gl.viewport(0, 0, canvas.width, canvas.height);
      }
      window.addEventListener('resize', resize);
      resize();
      
      // Vertex Shader (simple full-screen quad)
      const vsSource = `
        attribute vec2 position;
        varying vec2 uv;
        void main() {
          uv = (position + 1.0) / 2.0;
          gl_Position = vec4(position, 0.0, 1.0);
        }
      `;
      
      // Fragment Shader (nebula with blue-white colors, scroll-enhanced movement)
      const fsSource = `
        precision mediump float;
        uniform float time;
        uniform float scrollY;
        uniform vec2 resolution;
        varying vec2 uv;
        
        // Simple noise function (approximates Perlin)
        float hash(vec2 p) {
          return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);
        }
        float noise(vec2 p) {
          vec2 i = floor(p);
          vec2 f = fract(p);
          f = f * f * (3.0 - 2.0 * f);
          return mix(mix(hash(i + vec2(0.0, 0.0)), hash(i + vec2(1.0, 0.0)), f.x),
                     mix(hash(i + vec2(0.0, 1.0)), hash(i + vec2(1.0, 1.0)), f.x), f.y);
        }
        float fbm(vec2 p) { // Fractional Brownian Motion for organic texture
          float v = 0.0;
          float a = 0.5;
          for (int i = 0; i < 4; ++i) {
            v += a * noise(p);
            p *= 2.0;
            a *= 0.5;
          }
          return v;
        }
        
        void main() {
          vec2 pos = uv * resolution / min(resolution.x, resolution.y); // Aspect-correct
          // Enhanced scroll-based parallax movement (scroll affects vertical position)
          float scrollOffset = scrollY * 0.0003; // Parallax effect - adjust multiplier for speed
          pos += vec2(time * 0.02, sin(time * 0.01) * 0.5 + scrollOffset); // Horizontal drift + scroll parallax
          float n = fbm(pos * 1.5 + time * 0.005 + scrollY * 0.0001); // Scroll also affects noise offset
          
          // Blue-white color scheme (matching image frames)
          vec3 color1 = vec3(0.08, 0.10, 0.14); // Deep blue space base
          vec3 color2 = vec3(0.78, 0.88, 1.0) * 0.5; // Light blue-white (rgba(200, 225, 255) normalized)
          vec3 color3 = vec3(0.12, 0.56, 1.0) * 0.4; // Bright blue (rgba(30, 144, 255) normalized)
          vec3 color4 = vec3(0.0, 0.75, 1.0) * 0.35; // Cyan-blue (rgba(0, 191, 255) normalized)
          vec3 color = mix(color1, mix(mix(color2, color3, n * 0.5), color4, n * 0.3), smoothstep(0.3, 0.7, n));
          
          // Blue-tinted horizontal streaks for depth
          color += vec3(0.03, 0.05, 0.07) * sin(pos.y * 10.0 + time * 0.1 + scrollY * 0.0002);
          
          // Soft fade at edges for seamless blending
          float edgeFade = smoothstep(0.0, 0.1, uv.x) * smoothstep(1.0, 0.9, uv.x) *
                           smoothstep(0.0, 0.1, uv.y) * smoothstep(1.0, 0.9, uv.y);
          color *= edgeFade;
          
          gl_FragColor = vec4(color, 1.0);
        }
      `;
      
      // Compile shader
      function createShader(gl, type, source) {
        const shader = gl.createShader(type);
        gl.shaderSource(shader, source);
        gl.compileShader(shader);
        if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {
          console.error('Shader compile error:', gl.getShaderInfoLog(shader));
          gl.deleteShader(shader);
          return null;
        }
        return shader;
      }
      
      // Program setup
      const vertexShader = createShader(gl, gl.VERTEX_SHADER, vsSource);
      const fragmentShader = createShader(gl, gl.FRAGMENT_SHADER, fsSource);
      if (!vertexShader || !fragmentShader) {
        canvas.style.display = 'none';
        return;
      }
      
      const program = gl.createProgram();
      gl.attachShader(program, vertexShader);
      gl.attachShader(program, fragmentShader);
      gl.linkProgram(program);
      if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {
        console.error('Program link error:', gl.getProgramInfoLog(program));
        canvas.style.display = 'none';
        return;
      }
      gl.useProgram(program);
      
      // Quad vertices
      const positionLocation = gl.getAttribLocation(program, 'position');
      const buffer = gl.createBuffer();
      gl.bindBuffer(gl.ARRAY_BUFFER, buffer);
      gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1, 1,-1, -1,1, 1,1]), gl.STATIC_DRAW);
      gl.enableVertexAttribArray(positionLocation);
      gl.vertexAttribPointer(positionLocation, 2, gl.FLOAT, false, 0, 0);
      
      // Uniforms
      const timeLocation = gl.getUniformLocation(program, 'time');
      const scrollYLocation = gl.getUniformLocation(program, 'scrollY');
      const resolutionLocation = gl.getUniformLocation(program, 'resolution');
      
      // Scroll tracking for parallax effect
      let scrollY = 0;
      function updateScroll() {
        scrollY = window.pageYOffset || document.documentElement.scrollTop || 0;
      }
      window.addEventListener('scroll', updateScroll, { passive: true });
      updateScroll();
      
      // Animation loop
      let startTime = Date.now();
      let animationId = null;
      function render() {
        const elapsed = (Date.now() - startTime) / 1000;
        gl.uniform1f(timeLocation, elapsed);
        gl.uniform1f(scrollYLocation, scrollY);
        gl.uniform2f(resolutionLocation, canvas.width, canvas.height);
        gl.drawArrays(gl.TRIANGLE_STRIP, 0, 4);
        animationId = requestAnimationFrame(render);
      }
      render();
      
      // Cleanup on page unload
      window.addEventListener('beforeunload', () => {
        if (animationId) cancelAnimationFrame(animationId);
        window.removeEventListener('resize', resize);
        window.removeEventListener('scroll', updateScroll);
      });
    })();

    // Active nav highlighting based on center intersection
    (function(){
      const navLinks = document.querySelectorAll('#top-nav a[data-target]');
      const sections = Array.from(document.querySelectorAll('section[id]'));
      function setActive(id){
        navLinks.forEach(a => a.classList.toggle('active', a.dataset.target === id));
      }
      const observer = new IntersectionObserver((entries) => {
        entries.forEach(e => {
          if(e.isIntersecting){
            setActive(e.target.id);
          }
        });
      }, { threshold: [0.5] });
      sections.forEach(s => observer.observe(s));
    })();

    // Portal card click handler (for whole-card navigation, avoiding nested anchors)
    (function(){
      document.querySelectorAll('.portal-card').forEach(card => {
        card.addEventListener('click', (e) => {
          const link = card.querySelector('a.btn');
          if (link && !e.target.closest('a')) {
            link.click();
          }
        });
      });
    })();

    // Subscribe/contact form
    (function(){
      const form = document.getElementById('subscribe-form');
      const status = document.getElementById('status');
      if(!form) return;
      form.addEventListener('submit', function(e){
        e.preventDefault();
        const emailEl = document.getElementById('email');
        const raw = (emailEl.value || '').trim();
        if(!raw){ status.textContent = 'Enter an email address'; return; }
        const email = encodeURIComponent(raw);
        const url = `https://script.google.com/macros/s/AKfycbxuwyKiJDUM0aj9hJFM2CJry7XoztiPuh4YD3Ir55xlDt7EzwRGgpT_K0ZZyw5W1Ss9Ww/exec?email=${email}`;
        fetch(url, { method:'GET', mode:'no-cors' })
          .then(()=>{ status.textContent = '✅ Thank you — message received'; form.reset(); })
          .catch(err=>{ console.error('Submission error:', err); status.textContent = '❌ Submission failed'; });
      });
    })();

    // Mobile menu fix - ensure smooth operation with keyboard support
    (function(){
      const toggle = document.querySelector('.hamburger');
      const nav = document.querySelector('.nav-list');
      if(!toggle || !nav) return;
      
      toggle.addEventListener('click', (e) => {
        e.preventDefault();
        e.stopPropagation();
        const expanded = toggle.getAttribute('aria-expanded') === 'true';
        toggle.setAttribute('aria-expanded', !expanded);
        nav.classList.toggle('open');
        nav.classList.toggle('active');
      });
      
      // Close menu when clicking outside
      document.addEventListener('click', (e) => {
        if (!nav.contains(e.target) && !toggle.contains(e.target) && nav.classList.contains('open')) {
          toggle.setAttribute('aria-expanded', 'false');
          nav.classList.remove('open');
          nav.classList.remove('active');
        }
      });
      
      // Close menu when pressing Escape key
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape' && nav.classList.contains('open')) {
          toggle.setAttribute('aria-expanded', 'false');
          nav.classList.remove('open');
          nav.classList.remove('active');
          toggle.focus(); // Return focus to toggle button
        }
      });
      
      // Close menu when a link is clicked (mobile)
      nav.querySelectorAll('a').forEach(link => {
        link.addEventListener('click', () => {
          if (window.innerWidth <= 768) {
            nav.classList.remove('open');
            nav.classList.remove('active');
            toggle.setAttribute('aria-expanded', 'false');
            toggle.textContent = '☰';
          }
        });
      });
    })();

    // Dropdown menu toggle (prevent navigation on toggle click)
    (function(){
      const dropdownToggle = document.querySelector('.dropdown-toggle');
      if(!dropdownToggle) return;
      dropdownToggle.addEventListener('click', (e) => {
        e.preventDefault();
        const dropdown = dropdownToggle.closest('.nav-dropdown');
        if(dropdown) {
          dropdown.classList.toggle('active');
        }
      });
      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if(!e.target.closest('.nav-dropdown')) {
          document.querySelectorAll('.nav-dropdown').forEach(dd => {
            dd.classList.remove('active');
          });
        }
      });
    })();
    // Tool card toggle functionality
    function toggleToolCard(card) {
      const details = card.querySelector('.tool-details');
      const indicator = card.querySelector('div:last-child');
      if (details.style.display === 'none' || !details.style.display) {
        details.style.display = 'block';
        if (indicator) indicator.textContent = 'Click to collapse ▲';
        card.style.transform = 'scale(1.02)';
      } else {
        details.style.display = 'none';
        if (indicator) indicator.textContent = 'Click to expand ▼';
        card.style.transform = 'scale(1)';
      }
    }


    // Variable speed shimmer animation - changes speeds occasionally
    (function(){
      const shimmerElements = document.querySelectorAll('.image-card a::before, figure.image-card a::before');
      if(!shimmerElements.length) return;
      
      // Base speeds (slower)
      const baseSpeeds = [7, 7.5, 8, 8.2, 8.3, 8.5, 8.8, 7.2, 7.3];
      let currentSpeedIndex = 0;
      
      function varySpeeds(){
        shimmerElements.forEach((el, idx) => {
          // Get base speed from computed style or use default
          const computed = window.getComputedStyle(el);
          const currentDuration = parseFloat(computed.animationDuration) || baseSpeeds[idx % baseSpeeds.length];
          
          // Vary speed by ±20% occasionally
          const variation = (Math.random() - 0.5) * 0.4; // -0.2 to +0.2 (20% variation)
          const newSpeed = currentDuration * (1 + variation);
          
          // Clamp between 6s and 10s
          const clampedSpeed = Math.max(6, Math.min(10, newSpeed));
          
          el.style.animationDuration = clampedSpeed + 's';
        });
      }
      
      // Change speeds every 8-12 seconds
      function scheduleNextVariation(){
        const delay = 8000 + Math.random() * 4000; // 8-12 seconds
        setTimeout(() => {
          varySpeeds();
          scheduleNextVariation();
        }, delay);
      }
      
      // Start varying speeds after initial load
      setTimeout(() => {
        scheduleNextVariation();
      }, 5000);
    })();
    
    // Mobile menu fix - ensure smooth operation
    (function() {
      const toggle = document.querySelector('.hamburger');
      const nav = document.querySelector('.nav-list');
      
      if (toggle && nav) {
        toggle.addEventListener('click', () => {
          const expanded = toggle.getAttribute('aria-expanded') === 'true';
          toggle.setAttribute('aria-expanded', !expanded);
          nav.classList.toggle('active');
        });
        
        // Close menu when clicking outside
        document.addEventListener('click', (e) => {
          if (!nav.contains(e.target) && !toggle.contains(e.target) && nav.classList.contains('active')) {
            toggle.setAttribute('aria-expanded', 'false');
            nav.classList.remove('active');
          }
        });
        
        // Close menu when pressing Escape key
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape' && nav.classList.contains('active')) {
            toggle.setAttribute('aria-expanded', 'false');
            nav.classList.remove('active');
            toggle.focus(); // Return focus to toggle button
          }
        });
      }
    })();
    
    // Lazy loading fallback for older browsers
    if (!('loading' in HTMLImageElement.prototype)) {
      document.querySelectorAll('img[loading="lazy"]').forEach(img => {
        // For older browsers, just load normally (no lazy loading)
        img.loading = 'eager';
      });
    }
  </script>
</body>
</html>

